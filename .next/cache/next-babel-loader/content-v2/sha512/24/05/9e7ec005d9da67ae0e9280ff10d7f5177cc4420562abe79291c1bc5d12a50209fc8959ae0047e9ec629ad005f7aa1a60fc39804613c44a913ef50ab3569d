{"ast":null,"code":"import { cartActions } from \"./cart-slice\";\nimport useHttp from \"../hooks/use-http\";\nconst url = \"https://react-http-3d73c-default-rtdb.firebaseio.com/orangecart.json\"; //read\n\nexport const fetchingCartData = () => {\n  //會自動 export action({type:'addToCart',ammount:1}) 也可以直接export方法出去\n  const {\n    isLoading,\n    error,\n    sendRequest\n  } = useHttp();\n  return async dispatch => {\n    const fetchData = async () => {\n      const response = await fetch(url);\n\n      if (!response.ok) {\n        throw new Error('Fetching data failed!');\n      }\n\n      const data = await response.json();\n      return data;\n    };\n\n    try {\n      const fetchingData = await fetchData();\n      dispatch(cartActions.replaceCart({\n        items: data.items || [],\n        totalQuantity: data.totalQuantity,\n        totalPrice: data.totalPrice\n      })); //當物件全刪，firebase totalQuantity=0 items 會消失，重刷執行replaceCart會map不到items，因此給預設值空[]\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n}; //update\n\nexport const sendingCartData = cartData => {\n  // const { isLoading, error, sendRequest } = useHttp();\n  return async dispatch => {\n    const applyData = data => {\n      console.log(\"Sent cart successfully\");\n    };\n\n    const reqeustData = {\n      url: url,\n      method: \"PUT\",\n      body: {\n        items: cartData.items,\n        totalQuantity: cartData.totalQuantity,\n        totalPrice: data.totalPrice\n      }\n    }; // sendRequest(reqeustData, applyData);\n  };\n};","map":{"version":3,"sources":["/Users/zhengyiting/ReactProjects/orange-web/store/cart-action.js"],"names":["cartActions","useHttp","url","fetchingCartData","isLoading","error","sendRequest","dispatch","fetchData","response","fetch","ok","Error","data","json","fetchingData","replaceCart","items","totalQuantity","totalPrice","console","log","message","sendingCartData","cartData","applyData","reqeustData","method","body"],"mappings":"AAAA,SAASA,WAAT,QAA4B,cAA5B;AACA,OAAOC,OAAP,MAAoB,mBAApB;AAEA,MAAMC,GAAG,GACP,sEADF,C,CAIA;;AACA,OAAO,MAAMC,gBAAgB,GAAG,MAAM;AACpC;AACA,QAAM;AAAEC,IAAAA,SAAF;AAAaC,IAAAA,KAAb;AAAoBC,IAAAA;AAApB,MAAoCL,OAAO,EAAjD;AAEA,SAAO,MAAOM,QAAP,IAAoB;AAEzB,UAAMC,SAAS,GAAG,YAAU;AAC1B,YAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACR,GAAD,CAA5B;;AACA,UAAG,CAACO,QAAQ,CAACE,EAAb,EAAgB;AACZ,cAAM,IAAIC,KAAJ,CAAU,uBAAV,CAAN;AACH;;AACD,YAAMC,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAT,EAAnB;AACA,aAAOD,IAAP;AACH,KAPC;;AASF,QAAG;AACA,YAAME,YAAY,GAAI,MAAMP,SAAS,EAArC;AACAD,MAAAA,QAAQ,CAACP,WAAW,CAACgB,WAAZ,CAAwB;AAChCC,QAAAA,KAAK,EAAEJ,IAAI,CAACI,KAAL,IAAc,EADW;AAEhCC,QAAAA,aAAa,EAAEL,IAAI,CAACK,aAFY;AAGhCC,QAAAA,UAAU,EAAGN,IAAI,CAACM;AAHc,OAAxB,CAAD,CAAR,CAFA,CAOA;AACF,KARD,CAQC,OAAMd,KAAN,EAAY;AACTe,MAAAA,OAAO,CAACC,GAAR,CAAYhB,KAAK,CAACiB,OAAlB;AACH;AACA,GAtBD;AAuBD,CA3BM,C,CA6BP;;AACA,OAAO,MAAMC,eAAe,GAAIC,QAAD,IAAc;AAC3C;AACA,SAAO,MAAOjB,QAAP,IAAoB;AACzB,UAAMkB,SAAS,GAAIZ,IAAD,IAAU;AAC1BO,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACD,KAFD;;AAIA,UAAMK,WAAW,GAAG;AAClBxB,MAAAA,GAAG,EAAEA,GADa;AAElByB,MAAAA,MAAM,EAAE,KAFU;AAGlBC,MAAAA,IAAI,EAAE;AACJX,QAAAA,KAAK,EAAEO,QAAQ,CAACP,KADZ;AAEJC,QAAAA,aAAa,EAAEM,QAAQ,CAACN,aAFpB;AAGJC,QAAAA,UAAU,EAAGN,IAAI,CAACM;AAHd;AAHY,KAApB,CALyB,CAezB;AACD,GAhBD;AAiBD,CAnBM","sourcesContent":["import { cartActions } from \"./cart-slice\";\nimport useHttp from \"../hooks/use-http\";\n\nconst url =\n  \"https://react-http-3d73c-default-rtdb.firebaseio.com/orangecart.json\";\n\n\n//read\nexport const fetchingCartData = () => {\n  //會自動 export action({type:'addToCart',ammount:1}) 也可以直接export方法出去\n  const { isLoading, error, sendRequest } = useHttp();\n\n  return async (dispatch) => {\n\n    const fetchData = async ()=>{\n      const response = await fetch(url);\n      if(!response.ok){\n          throw new Error('Fetching data failed!')\n      }\n      const data = await response.json()\n      return data\n  }\n\n  try{\n     const fetchingData =  await fetchData();\n     dispatch(cartActions.replaceCart({\n      items: data.items || [],\n      totalQuantity: data.totalQuantity,\n      totalPrice : data.totalPrice\n     }));\n     //當物件全刪，firebase totalQuantity=0 items 會消失，重刷執行replaceCart會map不到items，因此給預設值空[]\n  }catch(error){\n      console.log(error.message)\n  }\n  };\n};\n\n//update\nexport const sendingCartData = (cartData) => {\n  // const { isLoading, error, sendRequest } = useHttp();\n  return async (dispatch) => {\n    const applyData = (data) => {\n      console.log(\"Sent cart successfully\");\n    };\n\n    const reqeustData = {\n      url: url,\n      method: \"PUT\",\n      body: {\n        items: cartData.items,\n        totalQuantity: cartData.totalQuantity,\n        totalPrice : data.totalPrice\n      },\n    };\n\n    // sendRequest(reqeustData, applyData);\n  };\n};\n"]},"metadata":{},"sourceType":"module"}