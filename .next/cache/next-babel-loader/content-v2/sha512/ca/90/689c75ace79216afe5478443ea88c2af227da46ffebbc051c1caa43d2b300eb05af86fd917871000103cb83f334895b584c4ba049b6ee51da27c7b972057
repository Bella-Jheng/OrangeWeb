{"ast":null,"code":"import _regeneratorRuntime from \"/Users/zhengyiting/ReactProjects/orange-web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/zhengyiting/ReactProjects/orange-web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nimport { useCallback, useState } from \"react\";\n\nvar useHttp = function useHttp() {\n  _s();\n\n  var _useState = useState(null),\n      error = _useState[0],\n      setError = _useState[1];\n\n  var _useState2 = useState(false),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var sendRequest = useCallback( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(requestData, applyData) {\n      var response, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading(true);\n              setError(null);\n              _context.prev = 2;\n              _context.next = 5;\n              return fetch(requestData.url, {\n                method: requestData.method ? requestData.method : \"POST\",\n                headers: requestData.headers ? requestData.headers : {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(requestData.body) ? JSON.stringify(requestData.body) : null\n              });\n\n            case 5:\n              response = _context.sent;\n\n              if (response.ok) {\n                _context.next = 8;\n                break;\n              }\n\n              throw new Error(\"Request failed!\");\n\n            case 8:\n              _context.next = 10;\n              return response.json();\n\n            case 10:\n              data = _context.sent;\n              applyData(data);\n              _context.next = 17;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](2);\n              setError(_context.t0.message || \"Something went wrong!\");\n\n            case 17:\n              setIsLoading(false);\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 14]]);\n    }));\n\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }(), []);\n  return {\n    isLoading: isLoading,\n    error: error,\n    sendRequest: sendRequest\n  };\n};\n\n_s(useHttp, \"uvvboPrLJvHZfv0/cCnJccWftbM=\");\n\nexport default useHttp;","map":{"version":3,"sources":["/Users/zhengyiting/ReactProjects/orange-web/hooks/use-http.js"],"names":["useCallback","useState","useHttp","error","setError","isLoading","setIsLoading","sendRequest","requestData","applyData","fetch","url","method","headers","body","JSON","stringify","response","ok","Error","json","data","message"],"mappings":";;;;;AAAA,SAASA,WAAT,EAAsBC,QAAtB,QAAsC,OAAtC;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;AAAA;;AAAA,kBACMD,QAAQ,CAAC,IAAD,CADd;AAAA,MACbE,KADa;AAAA,MACNC,QADM;;AAAA,mBAEcH,QAAQ,CAAC,KAAD,CAFtB;AAAA,MAEbI,SAFa;AAAA,MAEFC,YAFE;;AAIpB,MAAMC,WAAW,GAAGP,WAAW;AAAA,wEAAC,iBAAOQ,WAAP,EAAmBC,SAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAC9BH,cAAAA,YAAY,CAAC,IAAD,CAAZ;AACAF,cAAAA,QAAQ,CAAC,IAAD,CAAR;AAF8B;AAAA;AAAA,qBAKLM,KAAK,CAACF,WAAW,CAACG,GAAb,EAAkB;AAC5CC,gBAAAA,MAAM,EAAEJ,WAAW,CAACI,MAAZ,GAAqBJ,WAAW,CAACI,MAAjC,GAA0C,MADN;AAE5CC,gBAAAA,OAAO,EAAEL,WAAW,CAACK,OAAZ,GAAsBL,WAAW,CAACK,OAAlC,GAA4C;AACnD,kCAAgB;AADmC,iBAFT;AAK5CC,gBAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeR,WAAW,CAACM,IAA3B,IACFC,IAAI,CAACC,SAAL,CAAeR,WAAW,CAACM,IAA3B,CADE,GAEF;AAPwC,eAAlB,CALA;;AAAA;AAKtBG,cAAAA,QALsB;;AAAA,kBAevBA,QAAQ,CAACC,EAfc;AAAA;AAAA;AAAA;;AAAA,oBAgBpB,IAAIC,KAAJ,CAAU,iBAAV,CAhBoB;;AAAA;AAAA;AAAA,qBAkBTF,QAAQ,CAACG,IAAT,EAlBS;;AAAA;AAkBtBC,cAAAA,IAlBsB;AAmB5BZ,cAAAA,SAAS,CAACY,IAAD,CAAT;AAnB4B;AAAA;;AAAA;AAAA;AAAA;AAsB5BjB,cAAAA,QAAQ,CAAC,YAAMkB,OAAN,IAAiB,uBAAlB,CAAR;;AAtB4B;AAyB9BhB,cAAAA,YAAY,CAAC,KAAD,CAAZ;;AAzB8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAAA;AAAA;AAAA;AAAA,OA2B5B,EA3B4B,CAA/B;AA6BA,SAAM;AACFD,IAAAA,SAAS,EAATA,SADE;AAEFF,IAAAA,KAAK,EAALA,KAFE;AAGFI,IAAAA,WAAW,EAAXA;AAHE,GAAN;AAKD,CAtCD;;GAAML,O;;AAwCN,eAAeA,OAAf","sourcesContent":["import { useCallback, useState } from \"react\";\n\nconst useHttp = () => {\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const sendRequest = useCallback(async (requestData,applyData) => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch(requestData.url, {\n        method: requestData.method ? requestData.method : \"POST\",\n        headers: requestData.headers ? requestData.headers : {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(requestData.body)\n          ? JSON.stringify(requestData.body)\n          : null,\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Request failed!\");\n      }\n      const data = await response.json();\n      applyData(data)\n\n    } catch (error) {\n      setError(error.message || \"Something went wrong!\");\n    }\n\n    setIsLoading(false);\n\n  }, []);\n\n  return{\n      isLoading,\n      error,\n      sendRequest\n  }\n};\n\nexport default useHttp;\n"]},"metadata":{},"sourceType":"module"}