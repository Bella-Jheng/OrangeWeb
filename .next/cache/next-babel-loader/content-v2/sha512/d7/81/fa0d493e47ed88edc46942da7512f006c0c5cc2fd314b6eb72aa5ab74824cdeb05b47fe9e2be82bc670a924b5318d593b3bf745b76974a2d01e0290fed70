{"ast":null,"code":"import { cartActions } from \"./cart-slice\";\nimport useHttp from \"../hooks/use-http\";\nconst url = \"https://react-http-3d73c-default-rtdb.firebaseio.com/orangecart.json\";\nconst {\n  isLoading,\n  error,\n  sendRequest\n} = useHttp(); //read\n\nexport const fetchingCartData = () => {\n  //會自動 export action({type:'addToCart',ammount:1}) 也可以直接export方法出去\n  return async dispatch => {\n    const applyData = data => {\n      dispatch(cartActions.replaceCart({\n        items: data.items || [],\n        totalQuantity: data.totalQuantity\n      })); //當物件全刪，firebase totalQuantity=0 items 會消失，重刷執行replaceCart會map不到items，因此給預設值空[]\n    };\n\n    const reqeustData = {\n      url: url,\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    sendRequest(reqeustData, applyData);\n  };\n}; //update\n\nexport const sendingCartData = cartData => {\n  const {\n    isLoading,\n    error,\n    sendRequest\n  } = useHttp();\n  return async dispatch => {\n    const applyData = data => {\n      console.log(\"Sent cart successfully\");\n    };\n\n    const reqeustData = {\n      url: url,\n      method: \"PUT\",\n      body: {\n        items: cartData.items,\n        totalQuantity: cartData.totalQuantity\n      }\n    };\n    sendRequest(reqeustData, applyData);\n    console.log(\"Successfully!\");\n  };\n};","map":{"version":3,"sources":["/Users/zhengyiting/ReactProjects/orange-web/store/cart-action.js"],"names":["cartActions","useHttp","url","isLoading","error","sendRequest","fetchingCartData","dispatch","applyData","data","replaceCart","items","totalQuantity","reqeustData","method","headers","sendingCartData","cartData","console","log","body"],"mappings":"AAAA,SAASA,WAAT,QAA4B,cAA5B;AACA,OAAOC,OAAP,MAAoB,mBAApB;AAEA,MAAMC,GAAG,GACP,sEADF;AAEA,MAAM;AAAEC,EAAAA,SAAF;AAAaC,EAAAA,KAAb;AAAoBC,EAAAA;AAApB,IAAoCJ,OAAO,EAAjD,C,CACA;;AACA,OAAO,MAAMK,gBAAgB,GAAG,MAAM;AACpC;AACA,SAAO,MAAOC,QAAP,IAAoB;AACzB,UAAMC,SAAS,GAAIC,IAAD,IAAU;AAC1BF,MAAAA,QAAQ,CACNP,WAAW,CAACU,WAAZ,CAAwB;AACtBC,QAAAA,KAAK,EAAEF,IAAI,CAACE,KAAL,IAAc,EADC;AAEtBC,QAAAA,aAAa,EAAEH,IAAI,CAACG;AAFE,OAAxB,CADM,CAAR,CAD0B,CAO1B;AACD,KARD;;AASA,UAAMC,WAAW,GAAG;AAClBX,MAAAA,GAAG,EAAEA,GADa;AAElBY,MAAAA,MAAM,EAAE,KAFU;AAGlBC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AAHS,KAApB;AAQAV,IAAAA,WAAW,CAACQ,WAAD,EAAcL,SAAd,CAAX;AACD,GAnBD;AAoBD,CAtBM,C,CAwBP;;AACA,OAAO,MAAMQ,eAAe,GAAIC,QAAD,IAAc;AAC3C,QAAM;AAAEd,IAAAA,SAAF;AAAaC,IAAAA,KAAb;AAAoBC,IAAAA;AAApB,MAAoCJ,OAAO,EAAjD;AAEA,SAAO,MAAOM,QAAP,IAAoB;AACzB,UAAMC,SAAS,GAAIC,IAAD,IAAU;AAC1BS,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACD,KAFD;;AAIA,UAAMN,WAAW,GAAG;AAClBX,MAAAA,GAAG,EAAEA,GADa;AAElBY,MAAAA,MAAM,EAAE,KAFU;AAGlBM,MAAAA,IAAI,EAAE;AACJT,QAAAA,KAAK,EAAEM,QAAQ,CAACN,KADZ;AAEJC,QAAAA,aAAa,EAAEK,QAAQ,CAACL;AAFpB;AAHY,KAApB;AASAP,IAAAA,WAAW,CAACQ,WAAD,EAAcL,SAAd,CAAX;AACAU,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACD,GAhBD;AAiBD,CApBM","sourcesContent":["import { cartActions } from \"./cart-slice\";\nimport useHttp from \"../hooks/use-http\";\n\nconst url =\n  \"https://react-http-3d73c-default-rtdb.firebaseio.com/orangecart.json\";\nconst { isLoading, error, sendRequest } = useHttp();\n//read\nexport const fetchingCartData = () => {\n  //會自動 export action({type:'addToCart',ammount:1}) 也可以直接export方法出去\n  return async (dispatch) => {\n    const applyData = (data) => {\n      dispatch(\n        cartActions.replaceCart({\n          items: data.items || [],\n          totalQuantity: data.totalQuantity,\n        })\n      );\n      //當物件全刪，firebase totalQuantity=0 items 會消失，重刷執行replaceCart會map不到items，因此給預設值空[]\n    };\n    const reqeustData = {\n      url: url,\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n\n    sendRequest(reqeustData, applyData);\n  };\n};\n\n//update\nexport const sendingCartData = (cartData) => {\n  const { isLoading, error, sendRequest } = useHttp();\n\n  return async (dispatch) => {\n    const applyData = (data) => {\n      console.log(\"Sent cart successfully\");\n    };\n\n    const reqeustData = {\n      url: url,\n      method: \"PUT\",\n      body: {\n        items: cartData.items,\n        totalQuantity: cartData.totalQuantity,\n      },\n    };\n\n    sendRequest(reqeustData, applyData);\n    console.log(\"Successfully!\");\n  };\n};\n"]},"metadata":{},"sourceType":"module"}