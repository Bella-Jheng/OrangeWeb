{"ast":null,"code":"import _regeneratorRuntime from \"/Users/zhengyiting/ReactProjects/orange-web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/zhengyiting/ReactProjects/orange-web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nimport { cartActions } from \"./cart-slice\";\nimport useHttp from \"../hooks/use-http\";\nvar url = \"https://react-http-3d73c-default-rtdb.firebaseio.com/orangecart.json\";\nexport var sendRequestFunction = function sendRequestFunction() {\n  _s();\n\n  var _useHttp = useHttp(),\n      isLoading = _useHttp.isLoading,\n      error = _useHttp.error,\n      sendRequest = _useHttp.sendRequest;\n}; //read\n\n_s(sendRequestFunction, \"CCnshfZlH2rzEybPx6MnKYOG61s=\", false, function () {\n  return [useHttp];\n});\n\nexport var fetchingCartData = function fetchingCartData() {\n  //會自動 export action({type:'addToCart',ammount:1}) 也可以直接export方法出去\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var applyData, reqeustData;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              applyData = function applyData(data) {\n                dispatch(cartActions.replaceCart({\n                  items: data.items || [],\n                  totalQuantity: data.totalQuantity\n                })); //當物件全刪，firebase totalQuantity=0 items 會消失，重刷執行replaceCart會map不到items，因此給預設值空[]\n              };\n\n              reqeustData = {\n                url: url,\n                method: \"GET\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                }\n              }; // sendRequest(reqeustData, applyData);\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n}; //update\n\nexport var sendingCartData = function sendingCartData(cartData) {\n  // const { isLoading, error, sendRequest } = useHttp();\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n      var applyData, reqeustData;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              applyData = function applyData(data) {\n                console.log(\"Sent cart successfully\");\n              };\n\n              reqeustData = {\n                url: url,\n                method: \"PUT\",\n                body: {\n                  items: cartData.items,\n                  totalQuantity: cartData.totalQuantity\n                }\n              }; // sendRequest(reqeustData, applyData);\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};","map":{"version":3,"sources":["/Users/zhengyiting/ReactProjects/orange-web/store/cart-action.js"],"names":["cartActions","useHttp","url","sendRequestFunction","isLoading","error","sendRequest","fetchingCartData","dispatch","applyData","data","replaceCart","items","totalQuantity","reqeustData","method","headers","sendingCartData","cartData","console","log","body"],"mappings":";;;;;AAAA,SAASA,WAAT,QAA4B,cAA5B;AACA,OAAOC,OAAP,MAAoB,mBAApB;AAEA,IAAMC,GAAG,GACP,sEADF;AAIC,OAAO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAI;AAAA;;AAAA,iBACMF,OAAO,EADb;AAAA,MAC5BG,SAD4B,YAC5BA,SAD4B;AAAA,MACjBC,KADiB,YACjBA,KADiB;AAAA,MACVC,WADU,YACVA,WADU;AAErC,CAFK,C,CAGR;;GAHcH,mB;UACgCF,O;;;AAG9C,OAAO,IAAMM,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AACpC;AACA;AAAA,wEAAO,iBAAOC,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACCC,cAAAA,SADD,GACa,SAAZA,SAAY,CAACC,IAAD,EAAU;AAC1BF,gBAAAA,QAAQ,CACNR,WAAW,CAACW,WAAZ,CAAwB;AACtBC,kBAAAA,KAAK,EAAEF,IAAI,CAACE,KAAL,IAAc,EADC;AAEtBC,kBAAAA,aAAa,EAAEH,IAAI,CAACG;AAFE,iBAAxB,CADM,CAAR,CAD0B,CAO1B;AACD,eATI;;AAUCC,cAAAA,WAVD,GAUe;AAClBZ,gBAAAA,GAAG,EAAEA,GADa;AAElBa,gBAAAA,MAAM,EAAE,KAFU;AAGlBC,gBAAAA,OAAO,EAAE;AACP,kCAAgB;AADT;AAHS,eAVf,EAiBL;;AAjBK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;;AAAA;AAAA;AAAA;AAAA;AAmBD,CArBM,C,CAuBP;;AACA,OAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,QAAD,EAAc;AAC3C;AACA;AAAA,yEAAO,kBAAOV,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACCC,cAAAA,SADD,GACa,SAAZA,SAAY,CAACC,IAAD,EAAU;AAC1BS,gBAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACD,eAHI;;AAKCN,cAAAA,WALD,GAKe;AAClBZ,gBAAAA,GAAG,EAAEA,GADa;AAElBa,gBAAAA,MAAM,EAAE,KAFU;AAGlBM,gBAAAA,IAAI,EAAE;AACJT,kBAAAA,KAAK,EAAEM,QAAQ,CAACN,KADZ;AAEJC,kBAAAA,aAAa,EAAEK,QAAQ,CAACL;AAFpB;AAHY,eALf,EAcL;;AAdK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;;AAAA;AAAA;AAAA;AAAA;AAgBD,CAlBM","sourcesContent":["import { cartActions } from \"./cart-slice\";\nimport useHttp from \"../hooks/use-http\";\n\nconst url =\n  \"https://react-http-3d73c-default-rtdb.firebaseio.com/orangecart.json\";\n\n\n export const sendRequestFunction = ()=>{\n    const { isLoading, error, sendRequest } = useHttp();\n  }\n//read\nexport const fetchingCartData = () => {\n  //會自動 export action({type:'addToCart',ammount:1}) 也可以直接export方法出去\n  return async (dispatch) => {\n    const applyData = (data) => {\n      dispatch(\n        cartActions.replaceCart({\n          items: data.items || [],\n          totalQuantity: data.totalQuantity,\n        })\n      );\n      //當物件全刪，firebase totalQuantity=0 items 會消失，重刷執行replaceCart會map不到items，因此給預設值空[]\n    };\n    const reqeustData = {\n      url: url,\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n    // sendRequest(reqeustData, applyData);\n  };\n};\n\n//update\nexport const sendingCartData = (cartData) => {\n  // const { isLoading, error, sendRequest } = useHttp();\n  return async (dispatch) => {\n    const applyData = (data) => {\n      console.log(\"Sent cart successfully\");\n    };\n\n    const reqeustData = {\n      url: url,\n      method: \"PUT\",\n      body: {\n        items: cartData.items,\n        totalQuantity: cartData.totalQuantity,\n      },\n    };\n\n    // sendRequest(reqeustData, applyData);\n  };\n};\n"]},"metadata":{},"sourceType":"module"}